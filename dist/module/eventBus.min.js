!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd&&define(["require","exports"],e)}((function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EventBus=void 0;class i{constructor(){this.listeners={}}on(e,t){this.registerListener(e,t)}once(e,t){this.registerListener(e,t,1)}exactly(e,t,i){this.registerListener(e,t,i)}off(e){delete this.listeners[e]}detach(e,t){const i=(this.listeners[e]||[]).filter((function(e){return e.callback!==t}));return e in this.listeners&&(this.listeners[e]=i,!0)}emit(e,t,...i){let s=[];if(this.hasListeners(e))s=this.listeners[e];else if(e.includes("*")){let t=e.replace(/\*\*/,"([^.]+.?)+");t=t.replace(/\*/g,"[^.]+");const i=e.match(t);i&&e===i[0]&&(s=this.listeners[e])}s.forEach(((r,n)=>{let c=r.callback;t&&(c=c.bind(t)),c(...i),void 0!==r.triggerCapacity&&(r.triggerCapacity--,s[n].triggerCapacity=r.triggerCapacity),this.checkToRemoveListener(r)&&this.listeners[e].splice(n,1)}))}registerListener(e,t,i){this.hasListeners(e)||(this.listeners[e]=[]),this.listeners[e].push({callback:t,triggerCapacity:i})}checkToRemoveListener(e){return void 0!==e.triggerCapacity&&e.triggerCapacity<=0}hasListeners(e){return e in this.listeners}}t.EventBus=i,t.default=i}));